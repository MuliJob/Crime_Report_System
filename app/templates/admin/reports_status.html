{% extends 'admin/layout.html' %}
{% block content %}
<style>
  .three-dots-btn {
      background: none;
      border: none;
      cursor: pointer;
  }
</style>
<div class="container">
</br>
<table class="table table-striped table-hover">
  <h2 style="text-align: center;">Thefts Reported</h2>

  <thead>
      <tr>
          <th scope="col">No. <i class="bi bi-arrow-down-up"></i></th>
          <th scope="col">Place of Theft <i class="bi bi-arrow-down-up"></i></th>
          <th scope="col">Street <i class="bi bi-arrow-down-up"></i></th>
          <th scope="col">Date Stolen <i class="bi bi-arrow-down-up"></i></th>
          <th scope="col">Time Reported<i class="bi bi-arrow-down-up"></i></th>
          <th scope="col">Stolen Property <i class="bi bi-arrow-down-up"></i></th>
          <th scope="col">Value <i class="bi bi-arrow-down-up"></i></th>
          <th scope="col">Status <i class="bi bi-arrow-down-up"></i></th>
          <th scope="col">Action <i class="bi bi-arrow-down-up"></i></th>
      </tr>
  </thead>
  <tbody>
      {% for theft in thefts %}
          <tr>
              <td>{{ loop.index }}</td>
              <td>{{ theft.place_of_theft }}</td>
              <td>{{ theft.street_address }}</td>
              <td>{{ theft.date_of_theft }}</td>
              <td>{{ theft.time_of_theft }}</td>
              <td>{{ theft.stolen_property }}</td>
              <td>{{ theft.value }}</td>
              <td>{{ theft.status }}</td>
              <td>
                <div class="dropdown">
                    <button class="three-dots-btn" type="button" id="dropdownMenuButton{{ theft.theft_id }}" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton{{ theft.theft_id }}">
                        <li>
                            <form method="POST" action="{{ url_for('admins.updateStatus', theft_id=theft.theft_id) }}">
                                <input type="hidden" name="status" value="Recovered">
                                <button type="submit" class="dropdown-item">Recovered</button>
                            </form>
                        </li>
                        <li>
                            <form method="POST" action="{{ url_for('admins.updateStatus', theft_id=theft.theft_id) }}">
                                <input type="hidden" name="status" value="Under Investigation">
                                <button type="submit" class="dropdown-item">Under Investigation</button>
                            </form>
                        </li>
                    </ul>
                </div>
              </td>
          </tr>
      {% endfor %}    
  </tbody>
</table>
</div>

<script>
let script = document.createElement('script');
document.head.appendChild(script);
</script>
{% endblock content %}